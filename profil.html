<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Profil Düzenle</title>
    <style>
        :root { --vurgu: #f39c12; --bg: #0f172a; }
        * { cursor: none !important; box-sizing: border-box; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .kart { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); padding: 30px; border-radius: 25px; width: 90%; max-width: 380px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .pp-secim { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--vurgu); margin: 0 auto 20px; cursor: pointer; overflow: hidden; }
        .pp-secim img { width: 100%; height: 100%; object-fit: cover; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 10px; border: 1px solid #334155; background: #000; color: #fff; text-align: center; }
        input[readonly] { background: #1e293b; color: #64748b; border-style: dashed; cursor: not-allowed !important; }
        .kaydet-btn { width: 100%; padding: 15px; background: var(--vurgu); border: none; border-radius: 10px; color: #fff; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="kart">
        <div class="pp-secim" onclick="document.getElementById('fileInp').click()">
            <img id="preview" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
        </div>
        <input type="file" id="fileInp" hidden onchange="resimOnizle(this)">
        
        <label style="font-size: 11px; color: var(--vurgu); display: block; margin-bottom: 5px;">AD SOYAD</label>
        <input type="text" id="pAd" placeholder="Adınız Soyadınız">
        
        <label style="font-size: 11px; color: #64748b; display: block; margin-bottom: 5px;">DAİRE NO (DEĞİŞTİRİLEMEZ)</label>
        <input type="text" id="pDaire" readonly>
        
        <button class="kaydet-btn" onclick="kaydet()">DEĞİŞİKLİKLERİ KAYDET</button>
        <br><br>
        <a href="anamenu.html" style="color:#64748b; text-decoration:none; font-size:12px;">Vazgeç ve Dön</a>
    </div>

    <script>
        let base64Img = "";
        window.onload = function() {
            document.getElementById('pAd').value = localStorage.getItem('user_name') || "";
            document.getElementById('pDaire').value = localStorage.getItem('user_bd') || "A-1"; // indexten gelen veri
            if(localStorage.getItem('user_img')) document.getElementById('preview').src = localStorage.getItem('user_img');
        }

        function resimOnizle(input) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview').src = e.target.result;
                base64Img = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }

        function kaydet() {
            localStorage.setItem('user_name', document.getElementById('pAd').value);
            if(base64Img) localStorage.setItem('user_img', base64Img);
            alert("Profil güncellendi!");
            window.location.href = "anamenu.html";
        }
    </script>
</body>
</html>
