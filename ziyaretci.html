<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ziyaretçi Sistemi - Altıntaş Adalet Sitesi</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        :root { 
            --vurgu: #f39c12; 
            --bg: #0f172a; 
            --kart: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
        }

        /* Mouse/İmleç Tasarımı */
        * { cursor: none !important; }
        #cursor { width: 8px; height: 8px; background: var(--vurgu); border-radius: 50%; position: fixed; z-index: 99999; pointer-events: none; }
        #cursor-ring { width: 35px; height: 35px; border: 1.5px solid var(--vurgu); border-radius: 50%; position: fixed; z-index: 99998; pointer-events: none; transition: 0.15s ease-out; }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(var(--border) 1px, transparent 1px);
            background-size: 25px 25px;
            color: white; font-family: 'Segoe UI', sans-serif;
            margin: 0; padding-bottom: 50px;
        }

        .ust-nav {
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px);
            padding: 20px; position: sticky; top: 0; z-index: 1000;
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; gap: 15px;
        }

        .container { max-width: 450px; margin: auto; padding: 20px; }

        .kayit-kart {
            background: var(--kart); border: 1px solid var(--border);
            border-radius: 25px; padding: 25px; margin-bottom: 20px;
        }

        .input-grup { margin-bottom: 15px; }
        label { display: block; color: var(--vurgu); font-size: 11px; font-weight: bold; margin-bottom: 5px; letter-spacing: 1px; }
        
        input, select {
            width: 100%; background: rgba(0,0,0,0.2); border: 1px solid var(--border);
            padding: 12px; border-radius: 12px; color: white; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--vurgu); box-shadow: 0 0 10px rgba(243, 156, 18, 0.2); }

        .btn-vurgu {
            width: 100%; background: var(--vurgu); color: white; border: none;
            padding: 15px; border-radius: 15px; font-weight: bold; font-size: 14px;
            cursor: pointer; margin-top: 10px; transition: 0.3s;
        }
        .btn-vurgu:hover { transform: scale(1.02); filter: brightness(1.1); }

        /* Onay Fişi */
        #onayEkrani {
            display: none; background: white; color: #1e293b; 
            border-radius: 25px; padding: 30px; text-align: center;
        }

        .fis-detay {
            background: #f8fafc; border: 1px dashed #cbd5e1;
            padding: 15px; border-radius: 15px; margin: 15px 0;
            text-align: left; font-size: 13px; color: #334155;
        }

        .ref-kod {
            font-size: 24px; font-weight: 900; color: var(--bg);
            letter-spacing: 3px; margin: 10px 0;
        }

        .gecmis-item {
            background: var(--kart); border: 1px solid var(--border);
            padding: 12px; border-radius: 15px; margin-bottom: 10px;
            font-size: 12px; border-left: 4px solid var(--vurgu);
        }
    </style>
</head>
<body onload="gecmisiYukle()">

    <div id="cursor"></div><div id="cursor-ring"></div>

    <div class="ust-nav">
        <a href="index.html" style="color:var(--vurgu); text-decoration:none;"><i class="fa fa-chevron-left"></i></a>
        <span style="font-weight:bold; letter-spacing:1px; font-size:14px;">ALTINTAŞ ADALET SİTESİ GİRİŞ</span>
    </div>

    <div class="container">
        
        <div id="kayitFormu" class="w3-animate-bottom">
            <h3 style="font-weight:900; margin-top:0;">Ziyaretçi Bildirimi</h3>
            <p style="font-size:12px; opacity:0.6; margin-bottom:25px;">Lütfen güvenliğe ibraz etmek üzere formu doldurunuz.</p>
            
            <div class="kayit-kart">
                <div class="input-grup">
                    <label>ZİYARET EDİLECEK DAİRE</label>
                    <input type="number" id="zDaire" placeholder="Daire No">
                </div>

                <div class="input-grup">
                    <label>AD SOYAD</label>
                    <input type="text" id="zAd" placeholder="Giriş yapacak kişinin adı">
                </div>

                <div class="input-grup">
                    <label>PLAKA (ARAÇLI İSE)</label>
                    <input type="text" id="zPlaka" placeholder="07 AAA 007">
                </div>

                <div class="input-grup">
                    <label>ZİYARET SEBEBİ</label>
                    <select id="zTip">
                        <option>Misafir Ziyareti</option>
                        <option>Kurye / Yemek Siparişi</option>
                        <option>Teknik Servis / Tamirat</option>
                        <option>Eşya Taşıma / Nakliye</option>
                    </select>
                </div>

                <button class="btn-vurgu" onclick="kaydiTamamla()">KAYDI OLUŞTUR VE GÜVENLİĞE BİLDİR</button>
            </div>
        </div>

        <div id="onayEkrani" class="w3-animate-zoom">
            <div style="color: #22c55e; font-size: 50px;"><i class="fa fa-check-circle"></i></div>
            <h2 style="margin:5px 0; font-weight:900;">GİRİŞ ONAYI</h2>
            <p style="font-size:11px; margin:0;">Bu ekranın ekran görüntüsünü alıp güvenliğe gösteriniz.</p>
            
            <div class="fis-detay" id="fisIcerik"></div>
            
            <div style="font-size:10px; color:#64748b; margin-top:10px;">GİRİŞ REFERANS KODU</div>
            <div class="ref-kod" id="refKod">---</div>
            
            <button onclick="location.reload()" style="background:none; border:none; color:#64748b; text-decoration:underline; cursor:pointer; font-size:12px; margin-top:20px;">Yeni Bildirim Oluştur</button>
        </div>

        <div id="gecmisKutusu"></div>

    </div>

    <script>
        function kaydiTamamla() {
            const daire = document.getElementById('zDaire').value;
            const ad = document.getElementById('zAd').value;
            const plaka = document.getElementById('zPlaka').value || "Yaya Girişi";
            const tip = document.getElementById('zTip').value;

            if(!daire || !ad) {
                alert("Daire numarası ve isim boş bırakılamaz!");
                return;
            }

            const kod = "ADL" + Math.floor(1000 + Math.random() * 9000);
            const tarih = new Date().toLocaleString('tr-TR');

            const yeniKayit = { daire, ad, plaka, tip, kod, tarih };

            // Hafızaya Kaydet
            let gecmis = JSON.parse(localStorage.getItem('ziyaretci_gecmis')) || [];
            gecmis.unshift(yeniKayit);
            localStorage.setItem('ziyaretci_gecmis', JSON.stringify(gecmis.slice(0, 10))); // Son 10 kaydı tut

            // Ekranı Değiştir
            document.getElementById('kayitFormu').style.display = 'none';
            document.getElementById('onayEkrani').style.display = 'block';
            
            document.getElementById('refKod').innerText = kod;
            document.getElementById('fisIcerik').innerHTML = `
                <b>Bina:</b> Altıntaş Adalet Sitesi<br>
                <b>Gidilecek Konut:</b> Daire ${daire}<br>
                <b>Ziyaretçi:</b> ${ad}<br>
                <b>Araç Plaka:</b> ${plaka}<br>
                <b>Kategori:</b> ${tip}<br>
                <b>Tarih/Saat:</b> ${tari}
            `;
            gecmisiYukle();
        }

        function gecmisiYukle() {
            const gecmis = JSON.parse(localStorage.getItem('ziyaretci_gecmis')) || [];
            const kutu = document.getElementById('gecmisKutusu');
            if(gecmis.length === 0) return;

            kutu.innerHTML = '<p style="font-size:11px; color:var(--vurgu); font-weight:bold; margin-top:30px;">SON BİLDİRİMLERİNİZ</p>';
            gecmis.forEach(k => {
                kutu.innerHTML += `
                    <div class="gecmis-item">
                        <b>${k.ad}</b> <span style="float:right; color:var(--vurgu)">Daire ${k.daire}</span><br>
                        <small style="opacity:0.6">${k.tarih} - Kod: ${k.kod}</small>
                    </div>
                `;
            });
        }

        // Mouse Takip
        const cur = document.getElementById('cursor'); const ring = document.getElementById('cursor-ring');
        document.addEventListener('mousemove', e => { 
            cur.style.left = e.clientX+'px'; cur.style.top = e.clientY+'px'; 
            ring.animate({left:e.clientX-17.5+'px', top:e.clientY-17.5+'px'}, {duration:400, fill:"forwards"}); 
        });
    </script>
</body>
</html>
