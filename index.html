<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giriş - Altıntaş Adalet Sitesi</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        :root { --vurgu: #f39c12; --bg: #0f172a; --kart: rgba(30, 41, 59, 0.95); --border: rgba(255, 255, 255, 0.1); }
        body { background: var(--bg); color: white; font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .giris-kart { background: var(--kart); border: 1px solid var(--border); border-radius: 40px; padding: 40px; width: 90%; max-width: 400px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.5); }
        .m-input { width: 100%; background: rgba(15, 23, 42, 0.8); border: 1px solid var(--border); padding: 15px; border-radius: 15px; color: white; margin-bottom: 12px; outline: none; text-align: center; font-size: 16px; }
        .btn { width: 100%; padding: 16px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; background: var(--vurgu); color: white; }
    </style>
</head>
<body>

    <div class="giris-kart w3-animate-zoom">
        <i class="fa fa-university" style="font-size: 50px; color: var(--vurgu);"></i>
        <h2 style="font-weight: 900; margin: 15px 0;">ALTINTAŞ ADALET SİTESİ</h2>

        <div id="panelAna">
            <button class="btn" style="background:rgba(255,255,255,0.1); margin-bottom:10px;" onclick="sakinAc()">SİTE SAKİNİ</button>
            <button class="btn" style="background:rgba(255,255,255,0.1);" onclick="window.location.href='ziyaretci.html'">ZİYARETÇİ</button>
        </div>

        <div id="panelSakin" style="display:none;">
            <input type="text" id="daireInput" class="m-input" placeholder="Daire No (Örn: A-1)">
            <input type="text" id="sifreInput" class="m-input" placeholder="Şifre (1234)">
            <button class="btn" onclick="girisYap()">BORÇ SORGULA VE GİRİŞ</button>
            <div id="yukleniyor" style="display:none; margin-top:10px; color:var(--vurgu); font-size:12px;"><i class="fa fa-spinner fa-spin"></i> Bilgiler çekiliyor...</div>
            
            <div id="sonucPaneli" style="display:none; background:white; color:black; border-radius:20px; padding:20px; margin-top:20px; text-align:left;">
                <b id="resDaire"></b><br>
                Borç: <span id="resBorc" style="color:red; font-weight:bold;"></span> TL<br>
                <button class="btn" style="margin-top:15px; padding:10px;" onclick="sayfayaGit()">SİTEYE GİR</button>
            </div>
            <p onclick="location.reload()" style="font-size:11px; margin-top:15px; opacity:0.5; cursor:pointer;">← Geri</p>
        </div>
    </div>

    <script>
        // Görseldeki URL:
        const scriptURL = "https://script.google.com/macros/s/AKfycbxgHg97R_u6BgK4c7YjKeGr4tFWZOiaQt9Zm9Uh1BNul7el-it4vRxBQlnMJRxBYRVD/exec";

        function sakinAc() {
            document.getElementById('panelAna').style.display = 'none';
            document.getElementById('panelSakin').style.display = 'block';
        }

        function girisYap() {
            const bd = document.getElementById('daireInput').value.trim().toUpperCase();
            const pw = document.getElementById('sifreInput').value.trim();

            // Şifre kontrolü (Boşlukları ve büyük/küçük harfi yok sayar)
            if (pw == "1234") {
                document.getElementById('yukleniyor').style.display = 'block';
                
                fetch(scriptURL)
                .then(res => res.json())
                .then(data => {
                    document.getElementById('yukleniyor').style.display = 'none';
                    const kisi = data.find(i => (i.DAIRE || i.daire || "").toString().toUpperCase() === bd);
                    
                    if (kisi) {
                        localStorage.setItem('user_bd', bd);
                        document.getElementById('sonucPaneli').style.display = 'block';
                        document.getElementById('resDaire').innerText = bd + " - " + (kisi.AD || "Sakin");
                        document.getElementById('resBorc').innerText = kisi.BORC || "0";
                    } else {
                        alert("Daire bulunamadı. Tabloyu kontrol edin.");
                    }
                })
                .catch(e => {
                    alert("Tabloya bağlanılamadı!");
                    document.getElementById('yukleniyor').style.display = 'none';
                });
            } else {
                alert("ŞİFRE YANLIŞ! Lütfen sadece 1234 yazın.");
            }
        }

        function sayfayaGit() {
            window.location.href = localStorage.getItem('user_name') ? "anamenu.html" : "profil.html";
        }
    </script>
</body>
</html>
