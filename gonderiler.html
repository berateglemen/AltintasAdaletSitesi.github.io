<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Site Akışı - Altıntaş Adalet</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        :root { --vurgu: #f39c12; --bg: #0f172a; }
        * { cursor: none !important; }
        #cursor { width: 8px; height: 8px; background: var(--vurgu); border-radius: 50%; position: fixed; z-index: 99999; pointer-events: none; }
        #cursor-ring { width: 35px; height: 35px; border: 1.5px solid var(--vurgu); border-radius: 50%; position: fixed; z-index: 99998; pointer-events: none; transition: 0.15s ease-out; }
        
        body { 
            background: var(--bg) radial-gradient(#1e293b 1px, transparent 1px) 0 0 / 25px 25px;
            color: #fff; font-family: sans-serif; margin: 0; padding-bottom: 30px;
        }

        .ust-nav {
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px);
            padding: 15px; position: sticky; top: 0; z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center;
        }

        .container { max-width: 500px; margin: auto; padding: 15px; }

        .paylas-alani {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px; padding: 20px; margin-bottom: 25px;
        }

        textarea {
            width: 100%; background: transparent; border: none; color: #fff;
            resize: none; outline: none; font-size: 16px; min-height: 80px;
        }

        .kart {
            background: rgba(255,255,255,0.03); border-radius: 20px;
            padding: 20px; margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.05); position: relative;
        }

        .pfp-mini { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--vurgu); object-fit: cover; }

        .btn-vurgu {
            background: var(--vurgu); color: #fff; border: none;
            padding: 10px 25px; border-radius: 12px; font-weight: bold;
            cursor: pointer; float: right;
        }

        .temizle-btn {
            background: none; border: 1px solid #e74c3c; color: #e74c3c;
            padding: 5px 15px; border-radius: 10px; font-size: 10px; margin-top: 20px;
        }
    </style>
</head>
<body onload="akisYukle()">
    <div id="cursor"></div><div id="cursor-ring"></div>

    <div class="ust-nav">
        <a href="anamenu.html" style="color:var(--vurgu); text-decoration:none;"><i class="fa fa-arrow-left"></i> GERİ</a>
        <b style="letter-spacing:2px">SİTE AKIŞI</b>
        <i class="fa fa-users" style="color:var(--vurgu);"></i>
    </div>

    <div class="container">
        <div class="paylas-alani">
            <textarea id="mesajInput" placeholder="Bir şeyler yazın..."></textarea>
            <div style="margin-top:10px; height:40px;">
                <button class="btn-vurgu" onclick="gonder()">YAYINLA</button>
            </div>
        </div>

        <div id="akisKutusu"></div>

        <center>
            <button class="temizle-btn" onclick="akisTemizle()">AKISI SIFIRLA</button>
        </center>
    </div>

    <script>
        function akisYukle() {
            // Hafızadaki mesajları getir
            const mesajlar = JSON.parse(localStorage.getItem('site_akis_verisi')) || [];
            const akis = document.getElementById('akisKutusu');
            akis.innerHTML = "";

            mesajlar.forEach(m => {
                akis.innerHTML += `
                    <div class="kart w3-animate-bottom">
                        <div style="display:flex; align-items:center; gap:12px; margin-bottom:15px;">
                            <img src="${m.foto}" class="pfp-mini">
                            <div>
                                <b style="color:var(--vurgu); display:block; font-size:14px;">${m.ad.toUpperCase()}</b>
                                <small style="color:#94a3b8">Daire: ${m.bd} • ${m.saat}</small>
                            </div>
                        </div>
                        <p style="margin:0; line-height:1.6; color:#e2e8f0; font-size:15px;">${m.metin}</p>
                    </div>
                `;
            });
        }

        function gonder() {
            const txt = document.getElementById('mesajInput').value.trim();
            if(!txt) return;

            // Yeni mesaj objesi
            const yeniMesaj = {
                ad: localStorage.getItem('user_name') || "Sakin",
                bd: localStorage.getItem('user_bd') || "?",
                foto: localStorage.getItem('user_img') || "https://cdn-icons-png.flaticon.com/512/149/149071.png",
                metin: txt,
                saat: new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute:'2-digit'})
            };

            // Hafızaya kaydet
            const eskiMesajlar = JSON.parse(localStorage.getItem('site_akis_verisi')) || [];
            eskiMesajlar.unshift(yeniMesaj); // Başa ekle
            localStorage.setItem('site_akis_verisi', JSON.stringify(eskiMesajlar));

            document.getElementById('mesajInput').value = "";
            akisYukle(); // Listeyi tazele
        }

        function akisTemizle() {
            if(confirm("Tüm akışı temizlemek istiyor musun?")) {
                localStorage.removeItem('site_akis_verisi');
                akisYukle();
            }
        }

        // Mouse imleci
        const cur = document.getElementById('cursor'); const ring = document.getElementById('cursor-ring');
        document.addEventListener('mousemove', e => { 
            cur.style.left = e.clientX+'px'; cur.style.top = e.clientY+'px'; 
            ring.animate({left:e.clientX-17.5+'px', top:e.clientY-17.5+'px'}, {duration:400, fill:"forwards"}); 
        });
    </script>
</body>
</html>
